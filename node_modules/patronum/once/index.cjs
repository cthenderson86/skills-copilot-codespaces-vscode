"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.once = once;
var _effector = require("effector");
function once(unitOrConfig) {
  let source;
  let reset;
  if (_effector.is.unit(unitOrConfig)) {
    source = unitOrConfig;
  } else {
    ({
      source,
      reset
    } = unitOrConfig);
  }
  const $canTrigger = (0, _effector.createStore)(true, {
    name: "$canTrigger",
    sid: "-oewyj9"
  });
  const trigger = (0, _effector.sample)({
    and: [{
      source,
      filter: $canTrigger
    }],
    or: {
      name: "trigger",
      sid: "g04b8v"
    }
  });
  $canTrigger.on(trigger, () => false);
  if (reset) {
    $canTrigger.reset(reset);
  }
  return (0, _effector.sample)({
    and: [{
      clock: trigger
    }],
    or: {
      sid: "-owij98"
    }
  });
}